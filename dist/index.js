(()=>{var l=(t,i)=>{let e=new XMLHttpRequest;e.onreadystatechange=function(){if(e.readyState===4&&e.status===200){let o='[var="code-text"]',n=i.querySelector(o);if(!n)return;let c=s(js_beautify(e.responseText));n.innerHTML=c}},e.open("GET",t,!1),e.send()},s=t=>t.replace(/ /g,"&nbsp").replace(/\n/g,"<br/>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;<br/>");document.addEventListener("DOMContentLoaded",()=>{let LISTING_SELECTOR='[var="listing"]',CONTENT_SELECTOR='[var="content"]',SENDLIVE_SELECTOR='[var="go-live"]',DEMO_LISTING_SELECTOR='[var="demo-listing"]',RUN_SELECTOR='[var="run"]',RESET_SELECTOR='[var="reset"]',INSTRUCTIONS_SELECTOR='[var="instructions"]',DEMO_SELECTOR='[var="demodiv"]',listing=document.querySelector(LISTING_SELECTOR),content=document.querySelector(CONTENT_SELECTOR),demoListing=document.querySelector(DEMO_LISTING_SELECTOR),runButton=document.querySelector(RUN_SELECTOR),instructions=document.querySelector(INSTRUCTIONS_SELECTOR),resetButton=document.querySelector(RESET_SELECTOR),demo=document.querySelector(DEMO_SELECTOR);if(!listing||!content||!demoListing||!runButton||!instructions||!resetButton||!demo)return;let templateCode=demoListing.innerText;instructions.style.opacity="0";let code_listing_template=listing.cloneNode(!0),urlRegex=/(https?:\/\/[^\s]+js)/g;content.innerHTML=content.innerHTML.replace(urlRegex,function(t){return code_listing_template.setAttribute("url",t),l(t,code_listing_template),code_listing_template.outerHTML})||"",listing.remove();let sendLiveButtons=content.querySelectorAll(SENDLIVE_SELECTOR);sendLiveButtons.forEach(t=>{t.addEventListener("click",function(){var n,c,r;let e=((c=(n=this.closest('[var="listing"]'))==null?void 0:n.querySelector('[var="code-text"]'))==null?void 0:c.innerText)||"";instructions.innerText=((r=e.split(`
`)[0])==null?void 0:r.replace("//","").trim())||"",instructions.style.opacity="1";let o=templateCode.replace(/<script>/,"").replace(/<\/script>/,"");demoListing.innerHTML="<pre>&lt;script&gt;<br/>"+s(js_beautify(o.replace("XT1",e)))+"<br/>&lt;/script&gt;</pre>",console.log(js_beautify(o.replace("XT1",e))),hljs.highlightBlock(demoListing)})}),runButton.addEventListener("click",function(){let code=(demoListing==null?void 0:demoListing.innerText)||"";code=code.replace(/<\/?[^>]+(>|$)/g,""),eval(code)}),resetButton.addEventListener("click",function(){location.reload()})});})();
